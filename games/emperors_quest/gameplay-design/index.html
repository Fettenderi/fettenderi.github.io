<!doctype html><html lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><title>
         Emperor's Quest: Gameplay Design
        
    </title><link href=/icon/favicon.png rel=icon type=image/png><link href=https://fettenderi.github.io/fonts.css rel=stylesheet><script src=https://fettenderi.github.io/js/toc.js></script><link title="Marco Manganaro" href=https://fettenderi.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://fettenderi.github.io/theme/dark.css rel=stylesheet><script src=https://fettenderi.github.io/js/themetoggle.js></script><script>setTheme("dark")</script><link href=https://fettenderi.github.io/main.css media=screen rel=stylesheet><body><div class=content><header><div class=main><a href=https://fettenderi.github.io> <strong id=title> Marco Manganaro </strong> <div id=description>Technical Gameplay Designer</div> </a></div><nav><a href=mailto:marco.manganaro03@gmail.com id=menu-item target=_blank>/mail</a><a href=https://www.linkedin.com/in/marco-manganaro/ id=menu-item target=_blank>/linkedin</a><a href=https://github.com/Fettenderi id=menu-item target=_blank>/github</a><a href=https://fettenderi.itch.io id=menu-item target=_blank>/itch.io</a><a href=https://linktr.ee/fettenderi id=menu-item target=_blank>/linktree</a></nav></header><main><article><div class=title><div class=page-header>Emperor's Quest: Gameplay Design<span class=primary-color style=font-size:1.6em>.</span></div><div class=card-tags></div><div class=meta></div></div><div class=toc-container><h1 class=toc-title>Table of Contents</h1><ul class=toc-list><li><a href=https://fettenderi.github.io/games/emperors_quest/gameplay-design/#items>Items:</a> <ul><li><a href=https://fettenderi.github.io/games/emperors_quest/gameplay-design/#flint-steel>Flint & steel:</a><li><a href=https://fettenderi.github.io/games/emperors_quest/gameplay-design/#fishing-rod>Fishing rod:</a><li><a href=https://fettenderi.github.io/games/emperors_quest/gameplay-design/#bag-of-seeds>Bag of seeds:</a></ul><li><a href=https://fettenderi.github.io/games/emperors_quest/gameplay-design/#redstone-contraptions>Redstone Contraptions:</a> <ul><li><a href=https://fettenderi.github.io/games/emperors_quest/gameplay-design/#sender>Sender</a><li><a href=https://fettenderi.github.io/games/emperors_quest/gameplay-design/#receiver>Receiver</a></ul></ul></div><section class=body><h1 id=items>Items:</h1><p>While searching ideas for the combat system the first days of development, I was inspired by Minecraft 1.8 PVP. Its main feature being the usage of the sword and other tools to slow down or annoy the player, like the flint & steel or the fishing rod.<p>Following that idea I started sketching some of the uses for these items:<h2 id=flint-steel>Flint & steel:</h2><img class=solo-image src=https://fettenderi.github.io/processed_images/flint_n_steel.ed2b3e17ff18fbfb.png><p>Used to start fires, ignite TNTs, damage close up enemies and deactivate magnets. This elegantly encompasses a lot of features into a single item, making it a useful addition to your inventory. It also adds a risk reward-mechanic, there is a damage boost if the enemy is hit using the flint & steel from up close.<div class=gallery style=display:inline-flex><img class=gallery-gif src=https://i.giphy.com/media/v1.Y2lkPTc5MGI3NjExbDlzY3I2NjIxdWw4YnduOTlod3M2eWpzazU3czd5MHVwZm9uZmgyaSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/MA4XkcSHj0yzIpeiqZ/giphy.gif><img class=gallery-gif src=https://i.giphy.com/media/v1.Y2lkPTc5MGI3NjExeHFibzd3YjJqNnNjbHphMWI5ZHZlN291bjA1MGN5eDM0cjhjaXV4ZCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/vJ5FpgdaRtlp04DZE8/giphy.gif><img class=gallery-gif src=https://i.giphy.com/media/v1.Y2lkPTc5MGI3NjExaTV0d2szbDFjenB3d3I4NzUwaXBpYWt5dGQxZGRpa2xkNTZkeDE5OSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/YqohbhJRomqojk5GYW/giphy.gif><img class=gallery-gif src=https://i.giphy.com/media/v1.Y2lkPTc5MGI3NjExOGMwODVmMmRyMWU3YWQwbWg2cjY2bXh4Ynh5aTY5M2p4Y3pndTd4MiZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/iJLe59mnNzucBpDe3G/giphy.gif></div><h2 id=fishing-rod>Fishing rod:</h2><img class=solo-image src=https://fettenderi.github.io/processed_images/fishing_rod.a7e14179e4d167be.png><p>I wanted this item to be used as a grappling hook, used even to bring enemies closer, making them hang high and then let them take fall damage.<p>But in the end I scrapped this idea to make space for a more elegant and more appealing idea. This free movement mechanic took form into the Amulet and all the Supercharged Redstone mechanic.<h2 id=bag-of-seeds>Bag of seeds:</h2><img class=solo-image src=https://fettenderi.github.io/processed_images/bag_of_seeds.e6fa16a782e0cd2d.png><p>This was the first iteration of the Magneto-Resonant Controller. Initially this item would only attract and control hordes of chickens, ending the final sequence with a giant chicken made out of chickens wrecking the villain's mansion door.<p>It was replaced with the Controller to make it more in line with the other items, also I didn't like the idea of a simple bag of seeds being this powerful. The giant chicken idea got scrapped too because during early prototypes it didn't look as I wanted it to be. The ins and outs of this mechanic will be discussed in the System Design part.<h1 id=redstone-contraptions>Redstone Contraptions:</h1><p>Another very important, but also silent gameplay mechanic are all the redstone contraptions. They make possible all of the complex features such as: moving platforms, dispensers, TNTs and also the final bossfight.<p>Redstone is implemented in Engine using 2 kinds of object:<h2 id=sender>Sender</h2><img class=solo-image src=https://fettenderi.github.io/processed_images/sender.e02402aef978ac47.png><p>which is capable of sending an activation signal to all its connected receivers.<pre class=language-gd data-lang=gd data-linenos style=background:#2b303b;color:#c0c5ce><code class=language-gd data-lang=gd><table><tbody><tr><td>1<td><span>class_name Sender
</span><tr><td>2<td><span style=color:#b48ead>extends</span><span style=color:#a3be8c> Node2D
</span><tr><td>3<td><span>
</span><tr><td>4<td><span>@</span><span style=color:#b48ead>export var </span><span style=color:#bf616a>receivers</span><span> : </span><span style=color:#b48ead>Array</span><span>[Receiver]
</span><tr><td>5<td><span>@</span><span style=color:#b48ead>export var </span><span style=color:#bf616a>signal_scene</span><span> : PackedScene
</span><tr><td>6<td><span>@</span><span style=color:#b48ead>export var </span><span style=color:#bf616a>signal_cooldown_time</span><span> := </span><span style=color:#d08770>2.0
</span><tr><td>13<td><span>
</span><tr><td>14<td><span style=color:#65737e>## This method emits a signal to all connected receivers,
</span><tr><td>15<td><span style=color:#65737e>## it can be set only visible, only triggering or both at the same time.
</span><tr><td>16<td><span style=color:#65737e>## (I think this method is still a bit messy)
</span><tr><td>17<td><span style=color:#b48ead>func </span><span style=color:#8fa1b3>send</span><span>(</span><span style=color:#bf616a>triggering</span><span> : </span><span style=color:#bf616a>bool</span><span> = </span><span style=color:#bf616a>true</span><span>, </span><span style=color:#bf616a>signal_type</span><span> : </span><span style=color:#bf616a>bool</span><span> = </span><span style=color:#bf616a>true</span><span>, </span><span style=color:#bf616a>is_signal_visible</span><span> : </span><span style=color:#bf616a>bool</span><span> = </span><span style=color:#bf616a>true</span><span>) -> </span><span style=color:#b48ead>void</span><span>:
</span><tr><td>18<td><span>    </span><span style=color:#b48ead>if </span><span>not has_setup_signal_cooldown:
</span><tr><td>19<td><span>        </span><span style=color:#bf616a>_setup_signal_cooldown</span><span>()
</span><tr><td>20<td><span>        has_setup_signal_cooldown = </span><span style=color:#d08770>true
</span><tr><td><mark style=background:#65737e30>21</mark><td><mark style=background:#65737e30><span>    </span><span style=color:#b48ead>for</span><span> receiver in receivers:
</span></mark><tr><td><mark style=background:#65737e30>22</mark><td><mark style=background:#65737e30><span>        </span><span style=color:#b48ead>if</span><span> receiver != </span><span style=color:#d08770>null</span><span>:
</span></mark><tr><td><mark style=background:#65737e30>23</mark><td><mark style=background:#65737e30><span>        </span><span style=color:#b48ead>if</span><span> triggering:
</span></mark><tr><td><mark style=background:#65737e30>24</mark><td><mark style=background:#65737e30><span>            receiver.</span><span style=color:#bf616a>_sent</span><span>()
</span></mark><tr><td><mark style=background:#65737e30>25</mark><td><mark style=background:#65737e30><span>        </span><span style=color:#b48ead>if</span><span> is_signal_visible:
</span></mark><tr><td><mark style=background:#65737e30>26</mark><td><mark style=background:#65737e30><span>            </span><span style=color:#bf616a>_generate_signal</span><span>(receiver, signal_type)
</span></mark><tr><td>27<td><span>
</span><tr><td>28<td><span>
</span><tr><td>29<td><span style=color:#b48ead>func </span><span style=color:#8fa1b3>_generate_signal</span><span>(</span><span style=color:#bf616a>target</span><span> : </span><span style=color:#bf616a>Receiver</span><span>, </span><span style=color:#bf616a>signal_type</span><span> : </span><span style=color:#bf616a>bool</span><span> = </span><span style=color:#bf616a>false</span><span>) -> </span><span style=color:#b48ead>void</span><span>:
</span><tr><td>30<td><span>    </span><span style=color:#b48ead>if</span><span> is_in_signaling_cooldown and last_signaled_value == signal_type: </span><span style=color:#b48ead>return
</span><tr><td>31<td><span>
</span><tr><td>32<td><span>    </span><span style=color:#65737e># Spawning signal particles
</span><tr><td>40<td><span>
</span><tr><td>41<td><span>    signal_cooldown.</span><span style=color:#bf616a>start</span><span>(signal_cooldown_time)
</span><tr><td>42<td><span>    last_signaled_value = signal_type
</span><tr><td>43<td><span>    is_in_signaling_cooldown = </span><span style=color:#d08770>true
</span><tr><td>44<td><span>
</span><tr><td>45<td><span style=color:#b48ead>func </span><span style=color:#8fa1b3>_setup_signal_cooldown</span><span>():
</span><tr><td>46<td><span>    signal_cooldown = Timer.</span><span style=color:#bf616a>new</span><span>()
</span><tr><td>47<td><span>    signal_cooldown.wait_time = signal_cooldown_time
</span><tr><td>48<td><span>    signal_cooldown.one_shot = </span><span style=color:#d08770>true
</span><tr><td>49<td><span>    signal_cooldown.timeout.</span><span style=color:#bf616a>connect</span><span>(_on_signal_cooldown_timeout)
</span><tr><td>50<td><span>    </span><span style=color:#bf616a>add_child</span><span>(signal_cooldown)
</span><tr><td>51<td><span>
</span><tr><td>52<td><span style=color:#b48ead>func </span><span style=color:#8fa1b3>_on_signal_cooldown_timeout</span><span>():
</span><tr><td>53<td><span>    is_in_signaling_cooldown = </span><span style=color:#d08770>false
</span></table></code></pre><h2 id=receiver>Receiver</h2><img class=solo-image src=https://fettenderi.github.io/processed_images/receiver.dac346a4e8a0f4f9.png><p>which receives signals to perform particular actions.<pre class=language-gd data-lang=gd data-linenos style=background:#2b303b;color:#c0c5ce><code class=language-gd data-lang=gd><table><tbody><tr><td>1<td><span>class_name Receiver
</span><tr><td>2<td><span style=color:#b48ead>extends</span><span style=color:#a3be8c> Sender
</span><tr><td>3<td><span>
</span><tr><td>4<td><span>@</span><span style=color:#b48ead>export var </span><span style=color:#bf616a>activation_delay_time</span><span> := </span><span style=color:#d08770>1.0
</span><tr><td>5<td><span>@</span><span style=color:#b48ead>export var </span><span style=color:#bf616a>deactivation_delay_time</span><span> := </span><span style=color:#d08770>1.0
</span><tr><td>6<td><span>
</span><tr><td>7<td><span>@</span><span style=color:#b48ead>export var </span><span style=color:#bf616a>relay_time</span><span> := </span><span style=color:#d08770>0.0
</span><tr><td>8<td><span>
</span><tr><td>9<td><span>@</span><span style=color:#b48ead>export var </span><span style=color:#bf616a>waiter_scene</span><span> : PackedScene
</span><tr><td>10<td><span>
</span><tr><td>11<td><span style=color:#b48ead>var </span><span style=color:#bf616a>was_deactivated</span><span> := </span><span style=color:#d08770>true
</span><tr><td>12<td><span>
</span><tr><td>13<td><span style=color:#65737e>## This is the method that gets overridden when
</span><tr><td>14<td><span style=color:#65737e>## a receiver detects a redstone signal
</span><tr><td><mark style=background:#65737e30>15</mark><td><mark style=background:#65737e30><span style=color:#b48ead>func </span><span style=color:#8fa1b3>triggered</span><span>() -> </span><span style=color:#b48ead>void</span><span>:
</span></mark><tr><td><mark style=background:#65737e30>16</mark><td><mark style=background:#65737e30><span>    </span><span style=color:#b48ead>pass
</span></mark><tr><td>17<td><span>
</span><tr><td>18<td><span style=color:#b48ead>func </span><span style=color:#8fa1b3>_sent</span><span>():
</span><tr><td>19<td><span>    </span><span style=color:#b48ead>if</span><span> was_deactivated:
</span><tr><td>20<td><span>        </span><span style=color:#b48ead>if</span><span> activation_delay_time > </span><span style=color:#d08770>0.0</span><span>:
</span><tr><td>21<td><span>            await </span><span style=color:#bf616a>get_tree</span><span>().</span><span style=color:#bf616a>create_timer</span><span>(activation_delay_time).timeout
</span><tr><td>22<td><span>    </span><span style=color:#b48ead>else</span><span>:
</span><tr><td>23<td><span>        </span><span style=color:#b48ead>if</span><span> deactivation_delay_time > </span><span style=color:#d08770>0.0</span><span>:
</span><tr><td>24<td><span>            await </span><span style=color:#bf616a>get_tree</span><span>().</span><span style=color:#bf616a>create_timer</span><span>(deactivation_delay_time).timeout
</span><tr><td>25<td><span>    was_deactivated = not was_deactivated
</span><tr><td>26<td><span>    </span><span style=color:#bf616a>_received</span><span>()
</span><tr><td>27<td><span>
</span><tr><td>28<td><span style=color:#b48ead>func </span><span style=color:#8fa1b3>_received</span><span>() -> </span><span style=color:#b48ead>void</span><span>:
</span><tr><td>29<td><span>    </span><span style=color:#bf616a>triggered</span><span>()
</span><tr><td>30<td><span>    </span><span style=color:#b48ead>if</span><span> relay_time <= </span><span style=color:#d08770>0.0</span><span>: </span><span style=color:#b48ead>return
</span><tr><td>31<td><span>
</span><tr><td>32<td><span>    </span><span style=color:#b48ead>var </span><span style=color:#bf616a>waiter_instance</span><span> := waiter_scene.</span><span style=color:#bf616a>instantiate</span><span>()
</span><tr><td>33<td><span>
</span><tr><td>34<td><span>    </span><span style=color:#b48ead>if</span><span> waiter_instance is Waiter:
</span><tr><td><mark style=background:#65737e30>35</mark><td><mark style=background:#65737e30><span>        waiter_instance.receivers = receivers
</span></mark><tr><td><mark style=background:#65737e30>36</mark><td><mark style=background:#65737e30><span>        </span><span style=color:#bf616a>get_parent</span><span>().</span><span style=color:#bf616a>add_child</span><span>(waiter_instance, true)
</span></mark><tr><td><mark style=background:#65737e30>37</mark><td><mark style=background:#65737e30><span>        waiter_instance.</span><span style=color:#bf616a>start</span><span>(relay_time)
</span></mark></table></code></pre><br><div class=gallery><img class=solo-image src=https://fettenderi.github.io/processed_images/sender_inheritance_tree.4e4790cd383d2f71.png></div><p>A receiver is also a sender with some other functionality attached to it. This makes it possible to chain actions together even with custom timings.<div class=gallery><img class=gallery-gif src=https://i.giphy.com/media/v1.Y2lkPTc5MGI3NjExemI0NXk3MjRtYm5rMGl4cXM4Ym0yOHI4MHU4dm9heG15dGswbnZsZyZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/nvjiCYEXcsmP9jU2GG/giphy.gif><img class=gallery-gif src=https://i.giphy.com/media/v1.Y2lkPTc5MGI3NjExaHZ6c2Z0bGx5anhzd2JqdGY2d2Y4NGpnZHFtaXB0YjZjaG5rMDZoZSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/46GhVnSIl0XpRfv6zR/giphy.gif></div></section></article></main></div><footer>made by <a class=white href>fettenderi</a> | 2024 - 2024 © <br> built using <a href=https://www.getzola.org>zola</a>, based on <a href=https://github.com/not-matthias/apollo>apollo</a></footer>